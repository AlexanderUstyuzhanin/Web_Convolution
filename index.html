<!DOCTYPE html>


<html>
<head>
    <meta charset="utf-8" />
    <title>CONVOLUTION DEMONSTRATOR & MORE</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/style.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script src="js/audioConv.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <!--    Imports from anthony-->
    <link rel="stylesheet" type="text/css" href="css/visualization.css" />
    <link rel="stylesheet" type="text/css" href="css/jsxgraph.css" />
    <script type="text/javascript" src="js/jsxgraphcore.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/plots.js"></script>
    <script type="text/javascript" src="js/Math_functions.js"></script>
</head>

<body>
    <h1>This is a web-based convolution demonstrator.</h1>
    <div class="tabs">
        <ul class="tab-links">
            <li class="active"><a href="#tab1">Convolution graph</a></li>
            <li><a href="#tab2">Audio Convolution</a></li>
        </ul>

        <div class="tab-content">
            <div id="tab1" class="tab active">
                <div id ="space" class ="space" > </div> <!-- Create some space on the left of the screen -->

                <!-- User input area -->
                <div id ="formField" class="formField" align="top" >

                    <form>
                        <fieldset>
                            <legend>User Input Area</legend>
                            <p>
                                <label>Select Function 1:</label>

                                <select id = "functionList1" onchange="plot1(brd)">
                                    <option value = "1">Rectangle</option>
                                    <option value = "2">Triangle</option>
                                    <option value = "3">Gaussian</option>
                                    <option value = "4">Sinc</option>
                                    <option value = "5">Step</option>
                                </select><br>

                                Function 1 Width: <input type="text" id="F1_width" size="4" value="1" onchange="plot1(brd)" /><br>
                                Function 1 Shift  :  <input type="text" id="F1_shift" size="4" value="0" onchange="plot1(brd)" /><br>
                            </p>

                            <p>
                                <label>Select Function 2:</label>

                                <select id = "functionList2" onchange="plot2(brd)">
                                    <option value = "1">Triangle</option>
                                    <option value = "2">Rectangle</option>
                                    <option value = "3">Gaussian</option>
                                    <option value = "4">Sinc</option>
                                    <option value = "5">Step</option>
                                </select><br>

                                Function 2 Width: <input type="text" id="F2_width" size="4" value="1" onchange="plot2(brd)" /><br>
                                Function 2  Shift  :  <input type="text" id="F2_shift" size="4" value="0" onchange="plot2(brd)" /><br>
                            </p>

                            <p>
                                <button id="convoBtn" onclick="doConvo(brd2); return false;" >
                                    Convolution
                                </button>
                                <button id="corrBtn" onclick="doCorrelation(brd2); return false;" >
                                    Correlation
                                </button>
                            </p>

                        </fieldset>
                    </form>

                </div>
                <!-- User input area ends --------------------------------------------------------------------------------------------------------------- -->

                <!-- Create two JSXGRAPH boards to hold all the plots -->
                <div id ="boxGroup" class="boxGroup">

                    <div id="jxgbox" class="jxgbox" style="width:600px; height:300px" ></div>

                    <script type="text/javascript">
                    // The upper board goes from -4 to 4 on the X-axis and -1 to 2 on the Y-axis
                    var brd = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-4, 2, 4, -1], axis:true});
                    </script>

                    <div  style="width:600px; height:20px" ></div>   <!-- small space between the boards -->

                    <div id="jxgbox2" class="jxgbox" style="width:600px; height:300px" ></div>

                    <script type="text/javascript">
                    // The lower board goes from -8 to 8 on the X-axis and -1 to 2 on the Y-axis
                    var brd2 = JXG.JSXGraph.initBoard('jxgbox2', {boundingbox: [-8, 2, 8, -1], axis:true});

                    // Plot 2 functions (rect() and tri()) as start up case on the upper board
                    generateSamplePoints(); // generate sample points for the 2 functions in the upper graph
                    start(brd,brd2); // plot pre-selected functions on start-up

                    </script>
                </div>
            </div>

            <div id="tab2" class="tab">
                <h1>Audio convolution</h1>
                <p>Choose a file from your computer to try:
                    <input type="file" id="files" name="files[]" />
                </p>
                <p>Input sound:</p>
                <audio id="inputSound" controls></audio>
                <p>Choose an impulse response
                    <input type="file" id="iFiles" name="files[]" />
                    OR Choose from presets
                    <select id="irPreset">
                        <option value="" disabled selected style="display:none;">Select an impulse response...</option>
                        <option value="slinky">Slinky</option>
                        <option value="carpark">Carpark</option>
                    </select>

                </p>
                <p>Impulse response:</p>
                <audio id="impulseResponse" controls></audio>

                <p>Result:</p>
                <audio id="outputSound" controls></audio>
                <output id="list"></output>
            </div>

        </div>
    </div>

</body>
</html>
